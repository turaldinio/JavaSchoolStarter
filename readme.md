# База данных

* Программа, позволяющая создавать базу данных, и обращаться к ней, при помощи запросов.

* Запросы к бд могут содержать скобки, операторы and/or чередующиеся/идущие подряд.
* Заглавные буквы учитываются только значении колонки
* При отсутствии скобок, оператор and имеет приоритет над оператором or
* Поддерживаемые математические операторы:
*
    * =
*
    * !=
*
    * \>
*
    * \<
*
    * \>=
*
    * \<=
*
    * like
*
    * ilike
* При отправке запросов, содержащих ошибки, выбрасываются соответствующие исключения 
* Программа выполнена с использованием принципов SOLID.

* Вся архитектура уместилась в 3 основных пакетах.

- repository-пакет, содержащий в себе объекты, представляющие слой репозитория.
- exception- пакет, содержащий в себе классы ошибок.
- server- пакет, содержащий в себе основную логику приложения
-
    - interface-подпакет пакета server, содержащий интерфейсный слой
      Подробнее о каждом пакете:

* repository

1. DAORepository-основной класс репозитория , содержащая в себе бд,
   в виде private List<Map<String,Object»repository, где
   String-название колонки,Object-значение колонки
   Класс содержит методы , позволяющие изменять бд (update/delete/create/select)
2. MathematicalConverterRepository-класс, представляющий из себя репозиторный слой,
   который содержит Map<String,MathOperationParser<String,Boolean», хранящий в себе
   математические операторы, и реализацию функционального интерфейса для данных операций.
   String-операция (=.!=,<,>,<=,>=,like,ilike), MathOperationParser<String,Boolean>-функциональный интерфейс,
   выполняющий математическую операцию между 2 объектами)
3. ArgumentsTypesConverterRepository, класс, хранящий в себе Map<String,Function<String,?», где
   String-название колонки,Function<String,?»-реализация функционального интерфейса,
   приводящая название колонки String к нужному типу.

* Server

1. DAOServer-Данный класс является серверным слоем, имеющим доступ к репозиторию (DAORepository).
   Содержит основные методы, для изменения коллекции(update/select/delete/insert),
   которые подготавливают данные(парсинг/фильтрация), и
   делегируют работу репозиторному слою.

- **update** метод принимает строку запроса для обновления данных в бд.
  для данного метода обязательно наличие where оператора.
  ![Снимок экрана (37)](https://user-images.githubusercontent.com/65041919/231579058-94b77c07-dbf7-472d-abd2-8104b426bcbb.png)

- **insert** метод вставки данных в бд. Если бд пуста, первый запрос будет полностью
  вставлен в бд (при наличии отсутствия ошибок в запросе).
    ![insert](https://user-images.githubusercontent.com/65041919/231578545-48da6c30-f8df-4865-a52a-9f77b549df17.png)


 Если бд не пуста, метод вставки проверит, что вставляемые данные (ключи) содержатся в бд.
  Это необходимо для поддержания консистентности данных.
  ![Снимок экрана (35)](https://user-images.githubusercontent.com/65041919/231578694-85dd9dbc-0e4a-4443-b018-7599f8910b58.png)


- **select** - метод, позволяющий получить данных из бд. При отсутствии условий where,
  метод возвращает все данных из бд
  ![Снимок экрана (39)](https://user-images.githubusercontent.com/65041919/231579312-efc5a88b-b6dc-4c99-b74a-0451add900a7.png)
![Снимок экрана (40)](https://user-images.githubusercontent.com/65041919/231579503-8aeb973d-a846-4a57-91a5-801839c9b87c.png)

- **delete** метод для удаления колонок из бд.При отсутствии оператора where,
  из бд удаляются все данные
  ![Снимок экрана (41)](https://user-images.githubusercontent.com/65041919/231579642-4c67ae89-f19a-4485-a9cf-8ea8621cfce4.png)
![Снимок экрана (42)](https://user-images.githubusercontent.com/65041919/231579710-aec0b0b7-08f1-43ae-8f18-acb0e220f917.png)


2. DijkstraParser-класс, позволяющий распарсить строку, содержащую в себе несколько условий фильтрации,
   (and/or) или скобки. Парсинг происходит на основе алгоритма сортировочной станции.
   Изначально, метод getPostfixRequest-приводит строку к типу обратной польской
   нотации. После, срабатывает метод, calculatePostfixRequest-который, используя алгоритм сортировочной станции,
   парсит строку, и находит подходящие строки из бд
3. ArgumentsTypesConverterImpl-класс, представляющий реализацию интерфейса ArgumentsTypesConverter.

4. MathematicalConverterImpl-класс, представляющий реализацию интерфейса MathematicalConverter.

* interfaces

1. ArgumentsTypesConverter -интерфейс, принимающий два объекта Object,и возвращающий
   типизированный объект Object.
2. MathematicalConverter - интерфейс, содержащий метод для сравнения двух объектов Object
3. MathOperationParser- функциональный интерфейс, принимающий два одинаковых объекта, и возвращающий
   объект другого типа. используется в MathematicalConverterRepository
4. ReversionPolishNotation интерфейс, содержащий методы для перевода строки в обратную польскую запись
   , и метод для парсинга обратной польской нотации
